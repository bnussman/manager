import { ArgsTable, Canvas, Meta, Story } from '@storybook/addon-docs';
import TableBody from 'src/components/core/TableBody';
import TableHead from 'src/components/core/TableHead';
import Table from 'src/components/Table';
import TableCell from 'src/components/TableCell';
import TableRow from 'src/components/TableRow';
import TableRowLoading from 'src/components/TableRowLoading';

export const renderTableHead = (w1 = 25, w2 = 25, w3 = 25, w4= 25) => (
  <TableHead>
    <TableRow>
      <TableCell style={{ width: `${w1}%` }}>Label</TableCell>
      <TableCell style={{ width: `${w2}%` }}>Status</TableCell>
      <TableCell style={{ width: `${w3}%` }}>Created</TableCell>
      <TableCell style={{ width: `${w4}%` }}>Updated</TableCell>
    </TableRow>
  </TableHead>
);

<Meta title="Components/Table/Table Row Loading" component={TableRowLoading} />

# Table Row Loading

For pages that may take a little time to load on slower connections, consider adding a skeleton UI to indicate the page is loading.

<Canvas>
  <Story name="Default">
    <Table>
      {renderTableHead()}
      <TableBody>
        <TableRowLoading colSpan={4} />
      </TableBody>
    </Table>
  </Story>
</Canvas>

## With Custom Widths

<Canvas>
  <Story name="Custom Widths">
    <Table>
      {renderTableHead(40, 20, 20, 20)}
      <TableBody>
        <TableRowLoading colSpan={4} widths={[40, 20, 20, 20]} />
      </TableBody>
    </Table>
  </Story>
</Canvas>

## One Line Skeleton

<Canvas>
  <Story name="One Line Skeleton">
    <Table>
      {renderTableHead(40, 20, 20, 20)}
      <TableBody>
        <TableRowLoading colSpan={4} widths={[40, 20, 20, 20]} oneLine />
      </TableBody>
    </Table>
  </Story>
</Canvas>

## Entity Icon

<Canvas>
  <Story name="Entity Icon">
    <Table>
      {renderTableHead(40, 20, 20, 20)}
      <TableBody>
        <TableRowLoading
          colSpan={4}
          widths={[40, 20, 20, 20]}
          oneLine
          hasEntityIcon
        />
      </TableBody>
    </Table>
  </Story>
</Canvas>

## Component API

export const Template = (args) => {
  const heads = [];
  const unit = 100 / args.colSpan;
  for (let i = 0; i < args.colSpan; i++) {
    heads.push(unit);
  }
  return (
    <Table>
      {renderTableHead(...heads)}
      <TableBody>
        <TableRowLoading {...args} />
      </TableBody>
    </Table>
  );
};

<Canvas>
  <Story
    name="Component API"
    args={{
      colSpan: 4,
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

<ArgsTable story="Component API" />